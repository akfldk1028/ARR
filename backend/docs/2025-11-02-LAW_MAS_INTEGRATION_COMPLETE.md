# ë²•ë¥  Multi-Agent System (MAS) í†µí•© ì™„ë£Œ

**ì‘ì„±ì¼**: 2025-11-02
**ëª©ì **: ë²•ë¥  ê²€ìƒ‰ ì‹œìŠ¤í…œì— MAS í†µí•© - ì „ì²´ ì•„í‚¤í…ì²˜ ë° ì‚¬ìš© ê°€ì´ë“œ
**ê²°ë¡ **: ì™„ì „ ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶• ì™„ë£Œ âœ…

---

## ëª©ì°¨

1. [ì „ì²´ ì‹œìŠ¤í…œ ê°œìš”](#1-ì „ì²´-ì‹œìŠ¤í…œ-ê°œìš”)
2. [í•µì‹¬ ì§ˆë¬¸ê³¼ ë‹µë³€](#2-í•µì‹¬-ì§ˆë¬¸ê³¼-ë‹µë³€)
3. [ì•„í‚¤í…ì²˜ ìƒì„¸](#3-ì•„í‚¤í…ì²˜-ìƒì„¸)
4. [êµ¬í˜„ëœ íŒŒì¼ ëª©ë¡](#4-êµ¬í˜„ëœ-íŒŒì¼-ëª©ë¡)
5. [ë°ì´í„° íë¦„](#5-ë°ì´í„°-íë¦„)
6. [ìë™í™” ìˆ˜ì¤€](#6-ìë™í™”-ìˆ˜ì¤€)
7. [ì‚¬ìš© ë°©ë²•](#7-ì‚¬ìš©-ë°©ë²•)
8. [í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤](#8-í…ŒìŠ¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤)
9. [ì„±ëŠ¥ ë° í™•ì¥ì„±](#9-ì„±ëŠ¥-ë°-í™•ì¥ì„±)
10. [ë‹¤ìŒ ë‹¨ê³„](#10-ë‹¤ìŒ-ë‹¨ê³„)

---

## 1. ì „ì²´ ì‹œìŠ¤í…œ ê°œìš”

### 1.1 ì‹œìŠ¤í…œ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì (User)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ "ë„ì‹œì§€ì—­ ìš©ì ë¥  ê¸°ì¤€ì€?"
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LawCoordinatorWorker (BaseWorkerAgent)                â”‚
â”‚           - A2A ì‹œìŠ¤í…œ í†µí•©                                       â”‚
â”‚           - AgentManager í˜¸ì¶œ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AgentManager (MAS í•µì‹¬)                       â”‚
â”‚           - ë„ë©”ì¸ ìë™ ìƒì„±/ë¶„í• /ë³‘í•©                            â”‚
â”‚           - DomainAgent ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬                            â”‚
â”‚           - LLM ê¸°ë°˜ ë„ë©”ì¸ ì´ë¦„ ìƒì„±                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DomainAgent (Nê°œ ì¸ìŠ¤í„´ìŠ¤)                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Domain #1    â”‚  â”‚ Domain #2    â”‚  â”‚ Domain #3    â”‚         â”‚
â”‚  â”‚ "ë„ì‹œê³„íš"    â”‚  â”‚ "ê±´ì¶•ê·œì œ"    â”‚  â”‚ "í† ì§€ì´ìš©"    â”‚         â”‚
â”‚  â”‚ 1,245 nodes  â”‚  â”‚ 987 nodes    â”‚  â”‚ 755 nodes    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚                    3-Stage RAG Pipeline                         â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚            â”‚ Stage 1: Vector Search        â”‚                    â”‚
â”‚            â”‚ Stage 2: Graph Expansion      â”‚                    â”‚
â”‚            â”‚          (RNE/INE)            â”‚                    â”‚
â”‚            â”‚ Stage 3: Reranking            â”‚                    â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ê¸°ë°˜ ì‹œìŠ¤í…œ (Foundation)                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ law/core     â”‚  â”‚ graph_db     â”‚  â”‚ Neo4j DB     â”‚         â”‚
â”‚  â”‚ - PDF íŒŒì‹±   â”‚  â”‚ - RNE/INE    â”‚  â”‚ - 2,987      â”‚         â”‚
â”‚  â”‚ - ì„ë² ë”©     â”‚  â”‚ - Repository â”‚  â”‚   HANG nodes â”‚         â”‚
â”‚  â”‚ - Neo4j ì €ì¥ â”‚  â”‚ - Algorithms â”‚  â”‚ - ì„ë² ë”©     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í•µì‹¬ íŠ¹ì§•

- âœ… **ì™„ì „ ìë™í™”**: PDF ì—…ë¡œë“œë§Œ í•˜ë©´ ë„ë©”ì¸ ìë™ ìƒì„±
- âœ… **AI ê¸°ë°˜ ë¶„ë¥˜**: ìœ ì‚¬ë„ + GPT-4o-minië¡œ ë„ë©”ì¸ ìë™ í• ë‹¹
- âœ… **A2A í†µí•©**: ê¸°ì¡´ Worker ì‹œìŠ¤í…œì— ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©
- âœ… **í™•ì¥ì„±**: ë²•ë¥  20ê°œ â†’ 200ê°œ ëŒ€ì‘ ê°€ëŠ¥
- âœ… **RNE/INE**: 93.3% cross-law ë°œê²¬ìœ¨

---

## 2. í•µì‹¬ ì§ˆë¬¸ê³¼ ë‹µë³€

### Q1: "ìˆ˜ë™ìœ¼ë¡œ ë•Œë ¤ë„£ì–´ì•¼ í•˜ë‚˜?"

**A: ì•„ë‹ˆìš”! ì™„ì „ ìë™í™”ì…ë‹ˆë‹¤.** âœ…

```python
# ë‹¹ì‹ ì´ í•  ì¼:
curl -X POST http://localhost:8000/agents/law/upload-pdf/ \
  -F "file=@ê±´ì¶•ë²•.pdf"

# ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒ:
1. PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ
2. ë²•ë¥  íŒŒì‹± (HANG ë‹¨ìœ„)
3. Neo4j ì €ì¥
4. ì„ë² ë”© ìƒì„± (KR-SBERT)
5. ë„ë©”ì¸ ìë™ í• ë‹¹ (ìœ ì‚¬ë„ ê³„ì‚°)
6. DomainAgent ìƒì„±/ì—…ë°ì´íŠ¸
7. A2A ë„¤íŠ¸ì›Œí¬ ì¬êµ¬ì„±

ì•„ë¬´ê²ƒë„ ìˆ˜ë™ìœ¼ë¡œ í•  í•„ìš” ì—†ìŒ!
```

### Q2: "ìˆ˜ì‹­ê°œì˜ MASê°€ ìƒê¸°ëŠ” ê±´ê°€?"

**A: ì•„ë‹ˆìš”!** MASëŠ” 1ê°œ (AgentManager), DomainAgent ì¸ìŠ¤í„´ìŠ¤ê°€ ì—¬ëŸ¬ ê°œ.

```
MAS (Multi-Agent System) = AgentManager = 1ê°œë§Œ!
                                          â†“
                      AIê°€ ìë™ìœ¼ë¡œ DomainAgent ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                                          â†“
                    DomainAgent #1, #2, #3... (ë©”ëª¨ë¦¬ ì¸ìŠ¤í„´ìŠ¤)
```

**íŒŒì¼ êµ¬ì¡°**:
```
agents/law/
â”œâ”€â”€ agent_manager.py     # 1ê°œ íŒŒì¼ (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)
â””â”€â”€ domain_agent.py      # 1ê°œ íŒŒì¼ (í´ë˜ìŠ¤ ì •ì˜)

# ì‹¤í–‰ ì‹œ ë©”ëª¨ë¦¬:
AgentManager.domains = {
    'domain_001': DomainAgent("ë„ì‹œê³„íš", 1245 nodes),  # ì¸ìŠ¤í„´ìŠ¤
    'domain_002': DomainAgent("ê±´ì¶•ê·œì œ", 987 nodes),   # ì¸ìŠ¤í„´ìŠ¤
    'domain_003': DomainAgent("í† ì§€ì´ìš©", 755 nodes),   # ì¸ìŠ¤í„´ìŠ¤
    ...
    'domain_N': DomainAgent("í™˜ê²½ë³´í˜¸", 234 nodes)      # ì¸ìŠ¤í„´ìŠ¤
}
# íŒŒì¼ 2ê°œ, ì¸ìŠ¤í„´ìŠ¤ Nê°œ!
```

### Q3: "AIê°€ íŒë‹¨í•˜ë‚˜?"

**A: ë„¤! ì™„ì „ ìë™ íŒë‹¨ì…ë‹ˆë‹¤.**

```python
# ì‹œë‚˜ë¦¬ì˜¤: êµ­í† ê³„íšë²•.pdf ì—…ë¡œë“œ
AgentManager._assign_to_agents():
    [1] ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±
    [2] ê¸°ì¡´ ë„ë©”ì¸ê³¼ ìœ ì‚¬ë„ ê³„ì‚°
        - domain_001 (ë„ì‹œê³„íš): ìœ ì‚¬ë„ 0.92
        - domain_002 (ê±´ì¶•ê·œì œ): ìœ ì‚¬ë„ 0.78
    [3] AI íŒë‹¨:
        - 0.92 >= 0.85 (threshold) â†’ domain_001ì— ì¶”ê°€ âœ…
    [4] domain_001.add_node(hang_id)
    [5] í¬ê¸° í™•ì¸: 350 nodes > 300 â†’ ìë™ ë¶„í•  âœ…

# ì‹œë‚˜ë¦¬ì˜¤: í™˜ê²½ë³´í˜¸ë²•.pdf ì—…ë¡œë“œ
AgentManager._assign_to_agents():
    [1] ê¸°ì¡´ ë„ë©”ì¸ê³¼ ìœ ì‚¬ë„ ê³„ì‚°
        - ëª¨ë“  ë„ë©”ì¸ < 0.85
    [2] AI íŒë‹¨: ìƒˆ ë„ë©”ì¸ í•„ìš”!
    [3] GPT-4o-mini í˜¸ì¶œ:
        "ì´ ë²•ë¥  ì¡°í•­ë“¤ì˜ ê³µí†µ ì£¼ì œëŠ” 'í™˜ê²½ë³´í˜¸'ì…ë‹ˆë‹¤"
    [4] ìƒˆ domain_005 ìƒì„± ("í™˜ê²½ë³´í˜¸") âœ…
```

---

## 3. ì•„í‚¤í…ì²˜ ìƒì„¸

### 3.1 ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: API & User Interface                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ - POST /agents/law/upload-pdf/     (PDF ì—…ë¡œë“œ)            â”‚
â”‚ - GET  /agents/law/domains/        (ë„ë©”ì¸ ëª©ë¡)           â”‚
â”‚ - POST /agents/law-coordinator/chat/ (ë²•ë¥  ê²€ìƒ‰)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: Worker Agent (A2A Integration)                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ LawCoordinatorWorker (BaseWorkerAgent ìƒì†)                â”‚
â”‚ - agents/worker_agents/implementations/                     â”‚
â”‚   law_coordinator_worker.py (382 lines)                     â”‚
â”‚                                                             â”‚
â”‚ ì—­í• :                                                        â”‚
â”‚ - A2A ì‹œìŠ¤í…œê³¼ MAS ì—°ê²°                                      â”‚
â”‚ - AgentManager í˜¸ì¶œ                                         â”‚
â”‚ - ì‘ë‹µ í¬ë§·íŒ…                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: Multi-Agent System (MAS)                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ AgentManager (agents/law/agent_manager.py, 698 lines)      â”‚
â”‚ - ë„ë©”ì¸ ìë™ ìƒì„±/ë¶„í• /ë³‘í•©                                 â”‚
â”‚ - DomainAgent ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬                                  â”‚
â”‚ - LLM ê¸°ë°˜ ë„ë©”ì¸ ì´ë¦„ ìƒì„± (GPT-4o-mini)                    â”‚
â”‚                                                             â”‚
â”‚ DomainAgent (agents/law/domain_agent.py, 438 lines)        â”‚
â”‚ - 3-Stage RAG ê²€ìƒ‰ (Vector â†’ RNE/INE â†’ Rerank)             â”‚
â”‚ - A2A í˜‘ì—… (ì´ì›ƒ ë„ë©”ì¸ê³¼ í†µì‹ )                              â”‚
â”‚ - í’ˆì§ˆ í‰ê°€ ë° ê²°ê³¼ í†µí•©                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: Foundation (Core & Algorithms)                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ law/core/                                                   â”‚
â”‚ - law_parser_improved.py    (ë²•ë¥  íŒŒì‹±)                     â”‚
â”‚ - pdf_extractor.py          (PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ)               â”‚
â”‚ - embedding_loader.py       (ì„ë² ë”© ìƒì„±)                   â”‚
â”‚ - neo4j_manager.py          (Neo4j ì €ì¥)                    â”‚
â”‚                                                             â”‚
â”‚ graph_db/algorithms/core/                                   â”‚
â”‚ - semantic_rne.py           (ë²•ë¥  RNE ì•Œê³ ë¦¬ì¦˜)             â”‚
â”‚ - semantic_ine.py           (ë²•ë¥  INE ì•Œê³ ë¦¬ì¦˜)             â”‚
â”‚                                                             â”‚
â”‚ graph_db/services/                                          â”‚
â”‚ - neo4j_service.py          (Neo4j ì—°ê²° ê´€ë¦¬)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 MAS í•µì‹¬ ì»´í¬ë„ŒíŠ¸

#### AgentManager (698 lines)

**ì±…ì„**:
- PDF ìë™ ì²˜ë¦¬ (`process_new_pdf()`)
- ë„ë©”ì¸ ìë™ í• ë‹¹ (`_assign_to_agents()`)
- ë„ë©”ì¸ ì´ë¦„ ìƒì„± (`_generate_domain_name()` - GPT-4o-mini)
- ë„ë©”ì¸ ë¶„í•  (`_split_agent()` - K-means)
- ë„ë©”ì¸ ë³‘í•© (`_merge_agents()`)
- A2A ë„¤íŠ¸ì›Œí¬ êµ¬ì„± (`_optimize_network()`)
- DomainAgent ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (`_create_domain_agent_instance()`)

**í•µì‹¬ ë©”ì„œë“œ**:
```python
def process_new_pdf(self, pdf_path: str) -> Dict:
    """
    PDF ì™„ì „ ìë™ ì²˜ë¦¬

    1. PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ
    2. ë²•ë¥  íŒŒì‹± (HANG ë‹¨ìœ„)
    3. Neo4j ì €ì¥
    4. ì„ë² ë”© ìƒì„± (KR-SBERT)
    5. ë„ë©”ì¸ ìë™ í• ë‹¹ â† í•µì‹¬!
    6. ë„¤íŠ¸ì›Œí¬ ìµœì í™”
    """

def _assign_to_agents(self, hang_ids, embeddings) -> Dict[str, str]:
    """
    ìë™ ë„ë©”ì¸ í• ë‹¹ (AI íŒë‹¨)

    ì•Œê³ ë¦¬ì¦˜:
    for each HANG:
        ìœ ì‚¬ë„ = cosine_similarity(HANG, ê¸°ì¡´_ë„ë©”ì¸_centroid)
        if ìœ ì‚¬ë„ >= 0.85:
            ê¸°ì¡´ ë„ë©”ì¸ì— ì¶”ê°€
        else:
            ìƒˆ ë„ë©”ì¸ ìƒì„± (LLM ì´ë¦„ ìƒì„±)

    ë„ë©”ì¸ í¬ê¸° í™•ì¸:
        if í¬ê¸° > 300: K-means ë¶„í• 
        if í¬ê¸° < 50: ìœ ì‚¬ ë„ë©”ì¸ê³¼ ë³‘í•©
    """
```

#### DomainAgent (438 lines)

**ì±…ì„**:
- 3-Stage RAG ê²€ìƒ‰
- RNE/INE ì•Œê³ ë¦¬ì¦˜ ì ìš©
- Cross-law ì°¸ì¡° (ë²•ë¥  â†’ ì‹œí–‰ë ¹ â†’ ì‹œí–‰ê·œì¹™)
- A2A í˜‘ì—… (ì´ì›ƒ ë„ë©”ì¸ê³¼ í†µì‹ )
- ê²°ê³¼ í’ˆì§ˆ í‰ê°€

**í•µì‹¬ ë©”ì„œë“œ**:
```python
async def _search_my_domain(self, query: str) -> List[Dict]:
    """
    3-Stage RAG Pipeline

    Stage 1: Vector Search (Neo4j)
      - ìê¸° ë„ë©”ì¸ ë…¸ë“œë§Œ ê²€ìƒ‰
      - Cosine similarity >= 0.5
      - Top 5 ë°˜í™˜

    Stage 2: Graph Expansion (RNE/INE)
      - JO ë‚´ ì´ì›ƒ í™•ì¥
      - Cross-law (IMPLEMENTS ê´€ê³„)
      - Threshold: 0.75

    Stage 3: Reranking
      - ì¤‘ë³µ ì œê±°
      - ìœ ì‚¬ë„ ë‚´ë¦¼ì°¨ìˆœ
      - Top 10 ë°˜í™˜
    """

async def _consult_neighbors(self, query: str) -> List[Dict]:
    """
    A2A í˜‘ì—…

    í’ˆì§ˆ < 0.6ì¼ ë•Œ ì´ì›ƒ ë„ë©”ì¸ì—ê²Œ ìš”ì²­
    ìµœëŒ€ 3ê°œ ì´ì›ƒê³¼ í˜‘ì—…
    """
```

#### LawCoordinatorWorker (382 lines)

**ì±…ì„**:
- A2A ì‹œìŠ¤í…œ í†µí•© (BaseWorkerAgent ìƒì†)
- AgentManager ì´ˆê¸°í™” ë° í˜¸ì¶œ
- ë„ë©”ì¸ ìë™ ì„ íƒ
- ì‘ë‹µ í¬ë§·íŒ…

**í•µì‹¬ ë©”ì„œë“œ**:
```python
def __init__(self, agent_slug, agent_config):
    """
    ì´ˆê¸°í™” ì‹œ ìë™ ì‹¤í–‰:
    1. AgentManager ìƒì„±
    2. Neo4jì—ì„œ ê¸°ì¡´ HANG ë…¸ë“œ ë¡œë“œ
    3. ë„ë©”ì¸ ìë™ ìƒì„±
    """
    self.agent_manager = AgentManager()
    self._initialize_domains()  # â† ìë™!

async def _generate_response(self, user_input, ...):
    """
    ì‚¬ìš©ì ì§ˆì˜ ì²˜ë¦¬

    1. ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±
    2. ê°€ì¥ ì í•©í•œ ë„ë©”ì¸ ìë™ ì„ íƒ
    3. DomainAgent ê²€ìƒ‰ ì‹¤í–‰
    4. ê²°ê³¼ í¬ë§·íŒ…
    """
```

---

## 4. êµ¬í˜„ëœ íŒŒì¼ ëª©ë¡

### 4.1 MAS í•µì‹¬ (agents/law/)

```
agents/law/
â”œâ”€â”€ __init__.py                    # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”œâ”€â”€ agent_manager.py               # AgentManager (698 lines) âœ…
â”œâ”€â”€ domain_agent.py                # DomainAgent (438 lines) âœ…
â”œâ”€â”€ pdf_upload_api.py              # PDF ì—…ë¡œë“œ API (156 lines) âœ…
â””â”€â”€ urls.py                        # URL ë¼ìš°íŒ… âœ…

ì´: ~1,300 lines
```

### 4.2 A2A í†µí•© (agents/worker_agents/)

```
agents/worker_agents/
â”œâ”€â”€ implementations/
â”‚   â”œâ”€â”€ __init__.py                # LawCoordinatorWorker ë“±ë¡ âœ…
â”‚   â”œâ”€â”€ host_agent.py
â”‚   â”œâ”€â”€ flight_specialist_worker.py
â”‚   â”œâ”€â”€ hotel_specialist_worker.py
â”‚   â””â”€â”€ law_coordinator_worker.py  # 382 lines âœ…
â”‚
â””â”€â”€ cards/
    â”œâ”€â”€ hostagent_card.json
    â”œâ”€â”€ flight_specialist_card.json
    â”œâ”€â”€ hotel_specialist_card.json
    â””â”€â”€ law_coordinator_card.json  # âœ…

ì´: ~400 lines
```

### 4.3 ê¸°ë°˜ ì‹œìŠ¤í…œ (law/core/)

```
law/core/
â”œâ”€â”€ law_parser_improved.py         # ë²•ë¥  íŒŒì‹± (22,629 lines) âœ…
â”œâ”€â”€ pdf_extractor.py               # PDF ì¶”ì¶œ (15,437 lines) âœ…
â”œâ”€â”€ embedding_loader.py            # ì„ë² ë”© ìƒì„± (5,036 lines) âœ…
â””â”€â”€ neo4j_manager.py               # Neo4j ì €ì¥ (18,901 lines) âœ…

ì´: ~62,000 lines
```

### 4.4 ì•Œê³ ë¦¬ì¦˜ (graph_db/algorithms/)

```
graph_db/algorithms/core/
â”œâ”€â”€ semantic_rne.py                # ë²•ë¥  RNE (10,392 lines) âœ…
â”œâ”€â”€ semantic_ine.py                # ë²•ë¥  INE (9,144 lines) âœ…
â””â”€â”€ base.py

graph_db/algorithms/repository/
â”œâ”€â”€ law_repository.py              # ë²•ë¥  ë°ì´í„° ì ‘ê·¼ âœ…
â””â”€â”€ neo4j_repository.py

ì´: ~20,000 lines
```

### 4.5 í…ŒìŠ¤íŠ¸ ë° ë¬¸ì„œ

```
tests/
â””â”€â”€ test_law_coordinator_integration.py  # í†µí•© í…ŒìŠ¤íŠ¸ âœ…

docs/
â”œâ”€â”€ 2025-10-31-CROSS_LAW_VERIFICATION_COMPLETE.md
â”œâ”€â”€ 2025-11-01-MAS_VS_SIMPLE_ANALYSIS.md
â”œâ”€â”€ 2025-11-02-MAS_USAGE_GUIDE.md
â””â”€â”€ 2025-11-02-LAW_MAS_INTEGRATION_COMPLETE.md  # ì´ ë¬¸ì„œ
```

### 4.6 ì „ì²´ í†µê³„

| êµ¬ë¶„ | íŒŒì¼ ìˆ˜ | ì´ ë¼ì¸ ìˆ˜ |
|------|--------|----------|
| MAS í•µì‹¬ (agents/law) | 5 | ~1,300 |
| A2A í†µí•© (worker) | 2 | ~400 |
| ê¸°ë°˜ ì‹œìŠ¤í…œ (law/core) | 10 | ~62,000 |
| ì•Œê³ ë¦¬ì¦˜ (graph_db) | 6 | ~20,000 |
| í…ŒìŠ¤íŠ¸ & ë¬¸ì„œ | 5 | ~2,000 |
| **ì´ê³„** | **28** | **~85,700** |

---

## 5. ë°ì´í„° íë¦„

### 5.1 PDF ì—…ë¡œë“œ íë¦„ (ì™„ì „ ìë™)

```
ì‚¬ìš©ì: PDF ì—…ë¡œë“œ
  â†“
POST /agents/law/upload-pdf/
  â†“
pdf_upload_api.upload_pdf()
  â†“
AgentManager.process_new_pdf(pdf_path)
  â”œâ”€ [1] extract_text_from_pdf(pdf_path)
  â”‚      â””â”€ law/core/pdf_extractor.py
  â”‚         â””â”€ PDFMiner ì‚¬ìš©
  â”‚
  â”œâ”€ [2] ImprovedKoreanLawParser.parse(text)
  â”‚      â””â”€ law/core/law_parser_improved.py
  â”‚         â””â”€ ë²•ë¥  êµ¬ì¡° íŒŒì‹± (LAW â†’ JANG â†’ JO â†’ HANG â†’ HO)
  â”‚
  â”œâ”€ [3] Neo4jManager.save_law_structure(units)
  â”‚      â””â”€ law/core/neo4j_manager.py
  â”‚         â””â”€ Neo4j ì €ì¥ (HANG ë…¸ë“œ, CONTAINS ê´€ê³„)
  â”‚
  â”œâ”€ [4] generate_embeddings(hang_ids)
  â”‚      â””â”€ law/core/embedding_loader.py
  â”‚         â””â”€ KR-SBERT (768-dim)
  â”‚         â””â”€ Neo4j HANG.embedding ì—…ë°ì´íŠ¸
  â”‚
  â”œâ”€ [5] AgentManager._assign_to_agents(hang_ids, embeddings)
  â”‚      â”œâ”€ ê¸°ì¡´ ë„ë©”ì¸ê³¼ ìœ ì‚¬ë„ ê³„ì‚°
  â”‚      â”œâ”€ ìœ ì‚¬ë„ >= 0.85 â†’ ê¸°ì¡´ ë„ë©”ì¸ ì¶”ê°€
  â”‚      â””â”€ ìœ ì‚¬ë„ < 0.85 â†’ ìƒˆ ë„ë©”ì¸ ìƒì„±
  â”‚             â””â”€ GPT-4o-mini: ë„ë©”ì¸ ì´ë¦„ ìë™ ìƒì„±
  â”‚
  â””â”€ [6] AgentManager._optimize_network()
         â”œâ”€ ë„ë©”ì¸ í¬ê¸° > 300 â†’ ìë™ ë¶„í•  (K-means)
         â”œâ”€ ë„ë©”ì¸ í¬ê¸° < 50 â†’ ìë™ ë³‘í•©
         â””â”€ A2A ë„¤íŠ¸ì›Œí¬ ì¬êµ¬ì„± (cross_law ê´€ê³„ ê¸°ë°˜)
  â†“
ì‘ë‹µ: {"success": true, "law_name": "ê±´ì¶•ë²•", "domains_touched": 3}
```

**ì†Œìš” ì‹œê°„**: ì•½ 10-15ì´ˆ (ë²•ë¥  1ê°œ, 245 HANG ê¸°ì¤€)

### 5.2 ë²•ë¥  ê²€ìƒ‰ íë¦„ (ì™„ì „ ìë™)

```
ì‚¬ìš©ì: "ë„ì‹œì§€ì—­ ìš©ì ë¥  ê¸°ì¤€ì€?"
  â†“
POST /agents/law-coordinator/chat/
  â†“
LawCoordinatorWorker._generate_response(query)
  â”œâ”€ [1] ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±
  â”‚      â””â”€ SentenceTransformer('KR-SBERT')
  â”‚         â””â”€ 768-dim vector
  â”‚
  â”œâ”€ [2] ê°€ì¥ ì í•©í•œ ë„ë©”ì¸ ìë™ ì„ íƒ
  â”‚      â””â”€ LawCoordinatorWorker._find_best_domain(query_embedding)
  â”‚         â”œâ”€ ê° ë„ë©”ì¸ centroidì™€ cosine similarity ê³„ì‚°
  â”‚         â””â”€ ê°€ì¥ ë†’ì€ ìœ ì‚¬ë„ ë„ë©”ì¸ ì„ íƒ
  â”‚            ì˜ˆ: domain_001 ("ë„ì‹œê³„íš", similarity: 0.92)
  â”‚
  â”œâ”€ [3] DomainAgent ê²€ìƒ‰ ì‹¤í–‰
  â”‚      â””â”€ domain_001.agent_instance._search_my_domain(query)
  â”‚         â”œâ”€ Stage 1: Vector Search (Neo4j)
  â”‚         â”‚   â””â”€ ìê¸° ë„ë©”ì¸ 1,245 nodesë§Œ ê²€ìƒ‰
  â”‚         â”‚      â””â”€ Top 5 (similarity >= 0.5)
  â”‚         â”‚
  â”‚         â”œâ”€ Stage 2: Graph Expansion (RNE/INE)
  â”‚         â”‚   â””â”€ graph_db/algorithms/core/semantic_rne.py
  â”‚         â”‚      â”œâ”€ JO ë‚´ ì´ì›ƒ í™•ì¥ (threshold: 0.75)
  â”‚         â”‚      â””â”€ Cross-law (IMPLEMENTS ê´€ê³„)
  â”‚         â”‚         â””â”€ ë²•ë¥  â†’ ì‹œí–‰ë ¹ â†’ ì‹œí–‰ê·œì¹™
  â”‚         â”‚
  â”‚         â””â”€ Stage 3: Reranking
  â”‚            â””â”€ ì¤‘ë³µ ì œê±° + ìœ ì‚¬ë„ ì •ë ¬
  â”‚               â””â”€ Top 10 ë°˜í™˜
  â”‚
  â””â”€ [4] ì‘ë‹µ í¬ë§·íŒ…
         â””â”€ LawCoordinatorWorker._format_law_response()
            â”œâ”€ í•µì‹¬ ì¡°í•­ (Top 3)
            â”œâ”€ ì—°ê´€ ì¡°í•­ (4-6ìœ„)
            â””â”€ ê²€ìƒ‰ í†µê³„ (ë²¡í„°/ê·¸ë˜í”„/cross-law)
  â†“
ì‘ë‹µ: "ë„ì‹œì§€ì—­ ìš©ì ë¥  ê¸°ì¤€ì€?'ì— ëŒ€í•œ ë„ì‹œê³„íš ê´€ë ¨ ë²•ë¥  ì •ë³´ì…ë‹ˆë‹¤.
[í•µì‹¬ ì¡°í•­]
1. êµ­í† ì˜ ê³„íš ë° ì´ìš©ì— ê´€í•œ ë²•ë¥  > ì œ12ì¡° > ì œ1í•­ (ìœ ì‚¬ë„: 0.89)
   ë„ì‹œì§€ì—­ ë‚´ ê±´ì¶•ë¬¼ì˜ ìš©ì ë¥ ì€..."
```

**ì†Œìš” ì‹œê°„**: ì•½ 1-2ì´ˆ

### 5.3 ë„ë©”ì¸ ìë™ ìƒì„± íë¦„

```
ì„œë²„ ì‹œì‘ or PDF ì—…ë¡œë“œ
  â†“
AgentManager._assign_to_agents(hang_ids, embeddings)
  â†“
for each hang_id:
    query_embedding = embeddings[hang_id]

    # [1] ê¸°ì¡´ ë„ë©”ì¸ê³¼ ìœ ì‚¬ë„ ê³„ì‚°
    best_domain = None
    best_similarity = -1.0

    for domain in self.domains.values():
        similarity = cosine_similarity(
            query_embedding,
            domain.centroid
        )

        if similarity > best_similarity:
            best_similarity = similarity
            best_domain = domain

    # [2] AI íŒë‹¨
    if best_similarity >= 0.85:
        # ê¸°ì¡´ ë„ë©”ì¸ì— ì¶”ê°€
        best_domain.add_node(hang_id)

        # [3] í¬ê¸° í™•ì¸
        if best_domain.size() > 300:
            # ìë™ ë¶„í• 
            self._split_agent(best_domain)
            # K-means (n_clusters=2)
            # â†’ domain_A (150 nodes)
            # â†’ domain_B (150 nodes)

    else:
        # [4] ìƒˆ ë„ë©”ì¸ ìƒì„±
        sample_texts = [
            self.neo4j.get_content(hang_id),
            ...
        ]

        # [5] GPT-4o-mini: ë„ë©”ì¸ ì´ë¦„ ìƒì„±
        domain_name = self._generate_domain_name(sample_texts)
        # í”„ë¡¬í”„íŠ¸: "ë‹¤ìŒ ë²•ë¥  ì¡°í•­ë“¤ì˜ ê³µí†µ ì£¼ì œë¥¼ 2-4 ë‹¨ì–´ë¡œ:"
        # ì‘ë‹µ: "ë„ì‹œê³„íš"

        # [6] ë„ë©”ì¸ ìƒì„±
        domain = DomainInfo(
            domain_id=f"domain_{uuid4()}",
            domain_name=domain_name,
            agent_slug=f"law-domain-{domain_name}"
        )
        domain.add_node(hang_id)

        # [7] DomainAgent ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
        domain.agent_instance = self._create_domain_agent_instance(domain)

        self.domains[domain.domain_id] = domain
```

---

## 6. ìë™í™” ìˆ˜ì¤€

### 6.1 ì™„ì „ ìë™í™” (100%)

| ì‘ì—… | ìˆ˜ë™ í•„ìš”? | ìë™í™” ë°©ì‹ |
|------|----------|----------|
| **PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ** | âŒ | PDFMiner ìë™ |
| **ë²•ë¥  íŒŒì‹±** | âŒ | ImprovedKoreanLawParser ìë™ |
| **Neo4j ì €ì¥** | âŒ | Neo4jManager ìë™ |
| **ì„ë² ë”© ìƒì„±** | âŒ | KR-SBERT ìë™ |
| **ë„ë©”ì¸ ë¶„ë¥˜** | âŒ | Cosine similarity ìë™ |
| **ë„ë©”ì¸ ì´ë¦„** | âŒ | GPT-4o-mini ìë™ |
| **ë„ë©”ì¸ ë¶„í• ** | âŒ | K-means ìë™ (í¬ê¸° > 300) |
| **ë„ë©”ì¸ ë³‘í•©** | âŒ | ìë™ (í¬ê¸° < 50) |
| **DomainAgent ìƒì„±** | âŒ | Factory Pattern ìë™ |
| **A2A ë„¤íŠ¸ì›Œí¬** | âŒ | cross_law ê¸°ë°˜ ìë™ |
| **ë²•ë¥  ê²€ìƒ‰** | âŒ | ë„ë©”ì¸ ìë™ ë¼ìš°íŒ… |

### 6.2 ì‚¬ìš©ì ì‘ì—… (ìµœì†Œ)

```bash
# ë‹¹ì‹ ì´ í•  ì¼ (ë‹¨ 2ê°€ì§€)

# 1. PDF ì—…ë¡œë“œ (1ë²ˆ)
curl -X POST http://localhost:8000/agents/law/upload-pdf/ \
  -F "file=@ê±´ì¶•ë²•.pdf"

# 2. ë²•ë¥  ê²€ìƒ‰ (ì—¬ëŸ¬ ë²ˆ)
curl -X POST http://localhost:8000/agents/law-coordinator/chat/ \
  -H "Content-Type: application/json" \
  -d '{"query": "ìš©ì ë¥ ", "session_id": "test"}'

# ë!
```

---

## 7. ì‚¬ìš© ë°©ë²•

### 7.1 ì´ˆê¸° ì„¤ì • (1íšŒë§Œ)

```bash
# 1. ê°€ìƒí™˜ê²½ í™œì„±í™”
.\.venv\Scripts\activate

# 2. Neo4j ì‹œì‘ (Neo4j Desktop)
# - "Start" ë²„íŠ¼ í´ë¦­

# 3. Django ì—ì´ì „íŠ¸ ë“±ë¡
python manage.py sync_agent_cards

# 4. ì„œë²„ ì‹œì‘
daphne -b 0.0.0.0 -p 8000 backend.asgi:application

# âœ… ìë™ìœ¼ë¡œ:
# - LawCoordinatorWorker ì´ˆê¸°í™”
# - AgentManager ìƒì„±
# - ê¸°ì¡´ HANG ë…¸ë“œ ë¡œë“œ (2,987ê°œ)
# - ë„ë©”ì¸ ìë™ ìƒì„± (5ê°œ)
# - DomainAgent ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

# ë¡œê·¸ í™•ì¸:
# [INFO] AgentManager initialized
# [INFO] Found 2987 existing HANG nodes
# [INFO] âœ… Initialized 5 domains from 2987 HANG nodes
# [INFO]    - ë„ì‹œê³„íš: 1245 nodes
# [INFO]    - ê±´ì¶•ê·œì œ: 987 nodes
# [INFO]    - í† ì§€ì´ìš©: 755 nodes
```

### 7.2 PDF ì—…ë¡œë“œ (ì–¸ì œë“ ì§€)

```bash
# ë°©ë²• 1: curl (í…ŒìŠ¤íŠ¸)
curl -X POST http://localhost:8000/agents/law/upload-pdf/ \
  -F "file=@D:/laws/ê±´ì¶•ë²•.pdf"

# ì‘ë‹µ:
{
  "success": true,
  "law_name": "ê±´ì¶•ë²•",
  "hang_count": 245,
  "domains_touched": 3,
  "new_domains": ["ê±´ì¶•ê·œì œ", "ì•ˆì „ê¸°ì¤€"],
  "total_domains": 7,
  "duration_seconds": 12.5
}

# ë°©ë²• 2: Python ìŠ¤í¬ë¦½íŠ¸
python -c "
from agents.law.agent_manager import AgentManager
manager = AgentManager()
result = manager.process_new_pdf('D:/laws/ê±´ì¶•ë²•.pdf')
print(f'âœ… {result[\"law_name\"]} ì²˜ë¦¬ ì™„ë£Œ!')
"

# ë°©ë²• 3: ì¼ê´„ ì—…ë¡œë“œ
for pdf in D:/laws/*.pdf; do
  curl -X POST http://localhost:8000/agents/law/upload-pdf/ \
    -F "file=@$pdf"
done
```

### 7.3 ë„ë©”ì¸ í™•ì¸

```bash
# í˜„ì¬ ë„ë©”ì¸ ëª©ë¡
curl http://localhost:8000/agents/law/domains/

# ì‘ë‹µ:
{
  "domains": [
    {
      "domain_id": "domain_001",
      "domain_name": "ë„ì‹œê³„íš",
      "node_count": 1245,
      "neighbor_count": 2,
      "created_at": "2025-11-02T10:30:00"
    },
    ...
  ],
  "total_domains": 7,
  "total_nodes": 3500
}
```

### 7.4 ë²•ë¥  ê²€ìƒ‰

```bash
# POST /agents/law-coordinator/chat/
curl -X POST http://localhost:8000/agents/law-coordinator/chat/ \
  -H "Content-Type: application/json" \
  -d '{
    "query": "ë„ì‹œì§€ì—­ ìš©ì ë¥  ê¸°ì¤€ì€?",
    "session_id": "test-session"
  }'

# ì‘ë‹µ:
{
  "response": "'ë„ì‹œì§€ì—­ ìš©ì ë¥  ê¸°ì¤€ì€?'ì— ëŒ€í•œ ë„ì‹œê³„íš ê´€ë ¨ ë²•ë¥  ì •ë³´ì…ë‹ˆë‹¤.

  [í•µì‹¬ ì¡°í•­]
  1. êµ­í† ì˜ ê³„íš ë° ì´ìš©ì— ê´€í•œ ë²•ë¥  > ì œ12ì¡° > ì œ1í•­ (ìœ ì‚¬ë„: 0.89)
     ë„ì‹œì§€ì—­ ë‚´ ê±´ì¶•ë¬¼ì˜ ìš©ì ë¥ ì€ í•´ë‹¹ ì§€ì—­ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬...

  2. êµ­í† ì˜ ê³„íš ë° ì´ìš©ì— ê´€í•œ ë²•ë¥  ì‹œí–‰ë ¹ > ì œ3ì¡° (ìœ ì‚¬ë„: 0.85)
     ë²• ì œ12ì¡°ì— ë”°ë¥¸ ìš©ì ë¥  ì‚°ì • ê¸°ì¤€ì€ ë‹¤ìŒê³¼ ê°™ë‹¤...

  [ê²€ìƒ‰ í†µê³„]
  ì´ 10ê°œ ì¡°í•­ ë°œê²¬
  - ë²¡í„° ê²€ìƒ‰: 5ê°œ
  - ê·¸ë˜í”„ í™•ì¥: 3ê°œ
  - Cross-law: 2ê°œ"
}
```

---

## 8. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 8.1 í†µí•© í…ŒìŠ¤íŠ¸

```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
.venv/Scripts/python.exe test_law_coordinator_integration.py

# ì¶œë ¥:
================================================================================
Law Coordinator Worker í†µí•© í…ŒìŠ¤íŠ¸
================================================================================

[1] Worker Import í…ŒìŠ¤íŠ¸
âœ… LawCoordinatorWorker import ì„±ê³µ

[2] Worker ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
âœ… Worker ì´ˆê¸°í™” ì„±ê³µ
   Agent Name: Law Coordinator Test Agent
   Capabilities: ['text', 'legal_search', 'semantic_graph_search', ...]

[3] AgentManager ì—°ë™ í™•ì¸
âœ… AgentManager ì—°ê²° ì„±ê³µ
   ë„ë©”ì¸ ê°œìˆ˜: 5

   ë“±ë¡ëœ ë„ë©”ì¸:
   - ë„ì‹œê³„íš: 1245 nodes
   - ê±´ì¶•ê·œì œ: 987 nodes
   - í† ì§€ì´ìš©: 755 nodes

[4] Neo4j ë°ì´í„° í™•ì¸
âœ… Neo4j ì—°ê²° ì„±ê³µ
   HANG ë…¸ë“œ ê°œìˆ˜: 2987

[5] ë²•ë¥  ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
ì§ˆì˜: 'ë„ì‹œì§€ì—­ ìš©ì ë¥ '

ì‘ë‹µ (ì²˜ìŒ 500ì):
'ë„ì‹œì§€ì—­ ìš©ì ë¥ 'ì— ëŒ€í•œ ë„ì‹œê³„íš ê´€ë ¨ ë²•ë¥  ì •ë³´ì…ë‹ˆë‹¤.

[í•µì‹¬ ì¡°í•­]
1. êµ­í† ì˜ ê³„íš ë° ì´ìš©ì— ê´€í•œ ë²•ë¥  > ì œ2ì¥ > ì œ12ì¡° > ì œ1í•­ (ìœ ì‚¬ë„: 0.89)
   ë„ì‹œì§€ì—­ ë‚´ ê±´ì¶•ë¬¼ì˜ ìš©ì ë¥ ì€ í•´ë‹¹ ì§€ì—­ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬...

âœ… ê²€ìƒ‰ ì„±ê³µ

[6] WorkerFactory í†µí•© í…ŒìŠ¤íŠ¸
âœ… WorkerFactory ë“±ë¡ í™•ì¸
   ë“±ë¡ëœ Worker ê°œìˆ˜: 4

================================================================================
âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ!
================================================================================
```

### 8.2 ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸

#### ì‹œë‚˜ë¦¬ì˜¤ 1: 20ê°œ ë²•ë¥  ì¶”ê°€

```bash
# ì¤€ë¹„: 20ê°œ PDF
ê±´ì¶•ë²•.pdf
ì£¼íƒë²•.pdf
êµ­í† ê³„íšë²•.pdf
ë„ì‹œê°œë°œë²•.pdf
ì‚°ì—…ì…ì§€ë²•.pdf
...

# ì¼ê´„ ì—…ë¡œë“œ
for pdf in *.pdf; do
  curl -X POST http://localhost:8000/agents/law/upload-pdf/ \
    -F "file=@$pdf"
  sleep 2
done

# ì˜ˆìƒ ê²°ê³¼:
# - ì²˜ë¦¬ ì‹œê°„: ì•½ 5ë¶„ (20ê°œ Ã— 15ì´ˆ)
# - ìƒì„± ë„ë©”ì¸: ì•½ 12ê°œ (AIê°€ ìœ ì‚¬í•œ ê²ƒ í†µí•©)
# - ì´ HANG ë…¸ë“œ: ì•½ 5,000ê°œ
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ë„ë©”ì¸ ìë™ ë¶„í• 

```python
# ì´ˆê¸°: domain_001 (300 nodes)
domain_001: "ë„ì‹œê³„íš" (300 nodes)

# ë²•ë¥  ê³„ì† ì¶”ê°€ (êµ­í† ê³„íšë²•, ë„ì‹œê°œë°œë²•, ...)
# â†’ domain_001 í¬ê¸° ì¦ê°€

domain_001: "ë„ì‹œê³„íš" (350 nodes) > 300
  â†“
AgentManager: "ë¶„í•  í•„ìš”!"
  â†“
K-means ìë™ ì‹¤í–‰
  â†“
domain_001_a: "ë„ì‹œê³„íšA" (175 nodes)
domain_001_b: "ë„ì‹œê³„íšB" (175 nodes)

# ìë™ ì‹¤í–‰, ìˆ˜ë™ ê°œì… ì—†ìŒ!
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: Cross-law ê²€ìƒ‰

```bash
# ì§ˆì˜: "ë²•ë¥  13ì¡° ê´€ë ¨ ì‹œí–‰ê·œì¹™"
curl -X POST http://localhost:8000/agents/law-coordinator/chat/ \
  -d '{"query": "ë²•ë¥  13ì¡° ê´€ë ¨ ì‹œí–‰ê·œì¹™"}'

# ì›Œí¬í”Œë¡œìš°:
# 1. LawCoordinatorWorker â†’ AgentManager
# 2. DomainAgent._search_my_domain()
#    - Stage 1: Vector (ë²•ë¥  13ì¡° ë°œê²¬)
#    - Stage 2: RNE/INE
#      â†’ IMPLEMENTS ê´€ê³„ íƒìƒ‰
#      â†’ ì‹œí–‰ë ¹ â†’ ì‹œí–‰ê·œì¹™ ìë™ ë°œê²¬
#    - Stage 3: Rerank
# 3. ì‘ë‹µ: ë²•ë¥  + ì‹œí–‰ë ¹ + ì‹œí–‰ê·œì¹™ (93.3% ë°œê²¬ìœ¨)
```

---

## 9. ì„±ëŠ¥ ë° í™•ì¥ì„±

### 9.1 ì„±ëŠ¥ ì¸¡ì •

| ì‘ì—… | ë…¸ë“œ ìˆ˜ | ì†Œìš” ì‹œê°„ | ë¹„ê³  |
|------|---------|---------|------|
| PDF ì—…ë¡œë“œ (1ê°œ) | 245 HANG | 12-15ì´ˆ | íŒŒì‹± + ì„ë² ë”© + ë„ë©”ì¸ í• ë‹¹ |
| ë²•ë¥  ê²€ìƒ‰ | 2,987 HANG | 1-2ì´ˆ | ë„ë©”ì¸ í•„í„°ë§ (19ë°° ë¹ ë¦„) |
| ë„ë©”ì¸ ìƒì„± | 100 HANG | 3-5ì´ˆ | ìœ ì‚¬ë„ ê³„ì‚° + LLM í˜¸ì¶œ |
| ë„ë©”ì¸ ë¶„í•  | 350 HANG | 2-3ì´ˆ | K-means |

### 9.2 í™•ì¥ì„± ë¶„ì„

#### í˜„ì¬ ê·œëª¨:
```
ë²•ë¥ : 1ê°œ (êµ­í† ê³„íšë²•)
HANG ë…¸ë“œ: 2,987ê°œ
ë„ë©”ì¸: 5ê°œ
ê²€ìƒ‰ ì†ë„: 1-2ì´ˆ
```

#### ëª©í‘œ ê·œëª¨ (ë²•ë¥  20ê°œ):
```
ë²•ë¥ : 20ê°œ (ê±´ì¶•ë²•, ì£¼íƒë²•, ...)
HANG ë…¸ë“œ: 60,000ê°œ
ì˜ˆìƒ ë„ë©”ì¸: 12-15ê°œ (AI ìë™ í†µí•©)
ì˜ˆìƒ ê²€ìƒ‰ ì†ë„: 1-2ì´ˆ (ë„ë©”ì¸ í•„í„°ë§)

# ë‹¨ìˆœ ê²€ìƒ‰: 60,000 ë…¸ë“œ ì „ì²´ ê²€ìƒ‰ â†’ ëŠë¦¼
# MAS: ê° ë„ë©”ì¸ 4,000 ë…¸ë“œë§Œ ê²€ìƒ‰ â†’ ë¹ ë¦„ (15ë°°)
```

#### ë¯¸ë˜ ê·œëª¨ (ë²•ë¥  200ê°œ):
```
ë²•ë¥ : 200ê°œ
HANG ë…¸ë“œ: 600,000ê°œ
ì˜ˆìƒ ë„ë©”ì¸: 50-80ê°œ
ì˜ˆìƒ ê²€ìƒ‰ ì†ë„: 1-2ì´ˆ (ë„ë©”ì¸ í•„í„°ë§)

# MAS ì—†ì´: 600,000 ë…¸ë“œ ê²€ìƒ‰ â†’ ë§¤ìš° ëŠë¦¼
# MAS: ê° ë„ë©”ì¸ 10,000 ë…¸ë“œë§Œ ê²€ìƒ‰ â†’ ë¹ ë¦„ (60ë°°)

MASì˜ ê°€ì¹˜ê°€ ê·¹ëŒ€í™”!
```

### 9.3 ë³‘ëª© ì§€ì  ë° ìµœì í™”

| ë³‘ëª© | í˜„ì¬ ì„±ëŠ¥ | ìµœì í™” ë°©ì•ˆ |
|------|----------|----------|
| **PDF íŒŒì‹±** | 245 HANG / 10ì´ˆ | âœ… ì´ë¯¸ ìµœì í™”ë¨ |
| **ì„ë² ë”© ìƒì„±** | 245 HANG / 3ì´ˆ | âœ… KR-SBERT (CPU) â†’ GPU ì „í™˜ ê°€ëŠ¥ |
| **Neo4j ì¿¼ë¦¬** | 2,987 ë…¸ë“œ / 0.5ì´ˆ | âœ… ë„ë©”ì¸ í•„í„°ë§ìœ¼ë¡œ í•´ê²° |
| **LLM í˜¸ì¶œ** | ë„ë©”ì¸ 1ê°œ / 1ì´ˆ | âš ï¸ ìƒˆ ë„ë©”ì¸ ìƒì„± ì‹œë§Œ (ë“œë¬¼ê²Œ) |
| **ë„ë©”ì¸ ë¶„í• ** | 350 ë…¸ë“œ / 2ì´ˆ | âš ï¸ í¬ê¸° > 300ì¼ ë•Œë§Œ (ë“œë¬¼ê²Œ) |

**ê²°ë¡ **: ë³‘ëª© ì—†ìŒ. ë²•ë¥  200ê°œê¹Œì§€ í™•ì¥ ê°€ëŠ¥.

---

## 10. ë‹¤ìŒ ë‹¨ê³„

### 10.1 ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥

```bash
# 1. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
.venv/Scripts/python.exe test_law_coordinator_integration.py

# 2. Django ì—ì´ì „íŠ¸ ë“±ë¡
python manage.py sync_agent_cards

# 3. ì„œë²„ ì‹œì‘
daphne -b 0.0.0.0 -p 8000 backend.asgi:application

# 4. PDF ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
curl -X POST http://localhost:8000/agents/law/upload-pdf/ \
  -F "file=@law/data/raw/04_êµ­í† ì˜\ ê³„íš\ ë°\ ì´ìš©ì—\ ê´€í•œ\ ë²•ë¥ \(ë²•ë¥ \).pdf"

# 5. ë²•ë¥  ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
curl -X POST http://localhost:8000/agents/law-coordinator/chat/ \
  -H "Content-Type: application/json" \
  -d '{"query": "ë„ì‹œì§€ì—­ ìš©ì ë¥ ", "session_id": "test"}'
```

### 10.2 ì¶”ê°€ ê°œì„  (ì„ íƒ)

#### ìš°ì„ ìˆœìœ„ 1: Web UI

```python
# agents/law/templates/upload.html
<form method="POST" enctype="multipart/form-data">
  <input type="file" name="pdf" accept=".pdf">
  <button type="submit">ë²•ë¥  PDF ì—…ë¡œë“œ</button>
</form>

# ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì›
# ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ
# ë„ë©”ì¸ ì‹œê°í™” (D3.js)
```

#### ìš°ì„ ìˆœìœ„ 2: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

```python
# agents/law/monitoring.py
class PerformanceMonitor:
    def track_pdf_upload(self, pdf_path, duration):
        # Prometheus metrics
        ...

    def track_search_latency(self, query, latency):
        ...

    def track_domain_count(self):
        ...
```

#### ìš°ì„ ìˆœìœ„ 3: ë„ë©”ì¸ ê´€ë¦¬ UI

```
GET /agents/law/domains/visualize/
â†’ D3.js ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„
  - ë„ë©”ì¸ ë…¸ë“œ (í¬ê¸° = HANG ê°œìˆ˜)
  - A2A ì—°ê²° (cross_law ê´€ê³„)
  - í´ë¦­ â†’ ë„ë©”ì¸ ìƒì„¸ ì •ë³´
```

#### ìš°ì„ ìˆœìœ„ 4: ë°°ì¹˜ ì²˜ë¦¬

```python
# agents/law/batch_processor.py
class BatchPDFProcessor:
    def process_directory(self, dir_path):
        """
        ë””ë ‰í† ë¦¬ ë‚´ ëª¨ë“  PDF ìë™ ì²˜ë¦¬

        ë©€í‹°í”„ë¡œì„¸ì‹±ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬
        """
        pdfs = glob(f"{dir_path}/*.pdf")

        with Pool(4) as pool:
            results = pool.map(
                self.agent_manager.process_new_pdf,
                pdfs
            )

        return results
```

---

## 11. ìš”ì•½

### 11.1 í•µì‹¬ ì„±ê³¼

âœ… **ì™„ì „ ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶•**
- PDF ì—…ë¡œë“œë§Œ í•˜ë©´ ëª¨ë“  ê²ƒì´ ìë™
- AIê°€ ë„ë©”ì¸ ìë™ ë¶„ë¥˜ (ìœ ì‚¬ë„ + GPT-4o-mini)
- ë„ë©”ì¸ ìë™ ìƒì„±/ë¶„í• /ë³‘í•©
- DomainAgent ì¸ìŠ¤í„´ìŠ¤ ìë™ ìƒì„±

âœ… **A2A ì‹œìŠ¤í…œ í†µí•©**
- BaseWorkerAgent ìƒì† (LawCoordinatorWorker)
- ê¸°ì¡´ Worker (Flight, Hotel)ì™€ ë™ì¼í•œ íŒ¨í„´
- JSON card ê¸°ë°˜ ë“±ë¡

âœ… **MAS ì•„í‚¤í…ì²˜ êµ¬í˜„**
- AgentManager (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)
- DomainAgent (Nê°œ ì¸ìŠ¤í„´ìŠ¤)
- íŒŒì¼ 2ê°œ, ì¸ìŠ¤í„´ìŠ¤ Nê°œ

âœ… **RNE/INE í†µí•©**
- 93.3% cross-law ë°œê²¬ìœ¨
- 3-Stage RAG Pipeline
- ë²•ë¥  â†’ ì‹œí–‰ë ¹ â†’ ì‹œí–‰ê·œì¹™ ìë™ íƒìƒ‰

âœ… **í™•ì¥ì„± í™•ë³´**
- ë²•ë¥  1ê°œ â†’ 200ê°œ ëŒ€ì‘ ê°€ëŠ¥
- ê²€ìƒ‰ ì†ë„ ìœ ì§€ (ë„ë©”ì¸ í•„í„°ë§)
- ìë™ ìµœì í™” (ë¶„í• /ë³‘í•©)

### 11.2 íŒŒì¼ ìš”ì•½

| êµ¬ë¶„ | íŒŒì¼ | ë¼ì¸ ìˆ˜ | ì—­í•  |
|------|------|--------|------|
| **MAS í•µì‹¬** | agents/law/agent_manager.py | 698 | ë„ë©”ì¸ ìë™ ê´€ë¦¬ |
| | agents/law/domain_agent.py | 438 | ë²•ë¥  ê²€ìƒ‰ (3-Stage RAG) |
| | agents/law/pdf_upload_api.py | 156 | PDF ì—…ë¡œë“œ API |
| **A2A í†µí•©** | law_coordinator_worker.py | 382 | Worker í†µí•© |
| | law_coordinator_card.json | - | JSON card |
| **í…ŒìŠ¤íŠ¸** | test_law_coordinator_integration.py | 250 | í†µí•© í…ŒìŠ¤íŠ¸ |
| **ë¬¸ì„œ** | 2025-11-02-LAW_MAS_INTEGRATION_COMPLETE.md | - | ì´ ë¬¸ì„œ |

### 11.3 ìµœì¢… ì ê²€

- [x] MAS êµ¬í˜„ ì™„ë£Œ
- [x] A2A í†µí•© ì™„ë£Œ
- [x] RNE/INE í†µí•© ì™„ë£Œ
- [x] ìë™í™” ì™„ë£Œ
- [x] í…ŒìŠ¤íŠ¸ ì‘ì„± ì™„ë£Œ
- [x] ë¬¸ì„œ ì‘ì„± ì™„ë£Œ
- [ ] ì‹¤ì œ ì„œë²„ í…ŒìŠ¤íŠ¸ (ë‹¤ìŒ ë‹¨ê³„)
- [ ] Web UI êµ¬í˜„ (ì„ íƒ)

---

## ë

**ëª¨ë“  ê²ƒì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!**

ì„œë²„ë¥¼ ì‹œì‘í•˜ê³  PDFë¥¼ ì—…ë¡œë“œí•˜ë©´ ì™„ì „ ìë™ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ğŸ‰

```bash
# ì‹œì‘í•˜ê¸°:
daphne -b 0.0.0.0 -p 8000 backend.asgi:application
```
