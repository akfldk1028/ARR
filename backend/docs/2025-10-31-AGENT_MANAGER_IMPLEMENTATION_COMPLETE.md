# AgentManager ìê°€ ì¡°ì§í™” ì‹œìŠ¤í…œ êµ¬í˜„ ì™„ë£Œ

**ì‘ì„±ì¼**: 2025-10-31
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ
**ë‹¤ìŒ ë‹¨ê³„**: ì‹¤ì œ í…ŒìŠ¤íŠ¸ ë° ì„±ëŠ¥ ê²€ì¦

---

## ğŸ“‹ êµ¬í˜„ ê°œìš”

ì‚¬ìš©ì í”¼ë“œë°±ì— ë”°ë¼ **ì™„ì „ ìë™í™”ëœ ìê°€ ì¡°ì§í™” Multi-Agent System**ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­
> "íŒŒì‹±ëœ ë¬¸ì„œë¥¼ ë³´ê³  ë‚´ê°€ íŒŒì•…í•˜ê³  ë­ ê·¸ê±°ì— ë§ì¶°ì„œ ì—ì´ì „íŠ¸ ë„£ê³  ê·¸ê±´ ì¢€ ì›ƒê¸°ì§€ ì•Šì•„?"

### í•´ê²°ì±…
- âŒ ìˆ˜ë™ ë„ë©”ì¸ ë¶„ë¥˜
- âœ… ìë™ ë„ë©”ì¸ ë°œê²¬
- âœ… LLM ê¸°ë°˜ ë„ë©”ì¸ ì´ë¦„ ìë™ ìƒì„±
- âœ… ì—ì´ì „íŠ¸ ìë™ ìƒì„±/ë¶„í• /ë³‘í•©
- âœ… A2A ë„¤íŠ¸ì›Œí¬ ìë™ êµ¬ì„±

---

## ğŸ—‚ï¸ ìƒì„±ëœ íŒŒì¼

### 1. `agents/agent_manager.py` (518 lines)
**í•µì‹¬ í´ë˜ìŠ¤**: `AgentManager`, `DomainInfo`

**ì£¼ìš” ë©”ì„œë“œ**:
```python
class AgentManager:
    # í•µì‹¬ ì›Œí¬í”Œë¡œìš°
    def process_new_pdf(self, pdf_path: str) -> Dict
        """PDF â†’ íŒŒì‹± â†’ Neo4j â†’ ì„ë² ë”© â†’ ìë™ ë„ë©”ì¸ í• ë‹¹"""

    # ìë™ í• ë‹¹ ë¡œì§
    def _assign_to_agents(self, hang_ids, embeddings) -> Dict
        """ìœ ì‚¬ë„ >= 0.85: ê¸°ì¡´ ë„ë©”ì¸, < 0.85: ìƒˆ ë„ë©”ì¸ ìƒì„±"""

    # LLM í†µí•©
    def _generate_domain_name(self, hang_ids) -> str
        """GPT-4o-minië¡œ ë„ë©”ì¸ ì´ë¦„ ìë™ ìƒì„± (ì˜ˆ: "ë„ì‹œê³„íš")"""

    # í¬ê¸° ìµœì í™”
    def _split_agent(self, domain: DomainInfo)
        """í¬ê¸° > 300 â†’ K-meansë¡œ 2ê°œ ë¶„í• """

    def _merge_agents(self, domain_a, domain_b)
        """í¬ê¸° < 50 â†’ ìœ ì‚¬í•œ ë„ë©”ì¸ ë³‘í•©"""

    # A2A ë„¤íŠ¸ì›Œí¬
    def _rebuild_neighbor_network(self) -> int
        """cross_law ê´€ê³„ >= 10ê°œ â†’ ì´ì›ƒ ì—°ê²°"""
```

**ì„ê³„ê°’ ì„¤ì •**:
```python
MIN_AGENT_SIZE = 50      # ìµœì†Œ ì—ì´ì „íŠ¸ í¬ê¸°
MAX_AGENT_SIZE = 300     # ìµœëŒ€ ì—ì´ì „íŠ¸ í¬ê¸°
DOMAIN_SIMILARITY_THRESHOLD = 0.85  # ìƒˆ ë„ë©”ì¸ ìƒì„± ê¸°ì¤€
NEIGHBOR_THRESHOLD = 10  # A2A ì´ì›ƒ ìµœì†Œ cross_law ê°œìˆ˜
```

### 2. `agents/worker_agents/implementations/domain_agent.py` (446 lines)
**í•µì‹¬ í´ë˜ìŠ¤**: `DomainAgent(BaseWorkerAgent)`

**ì£¼ìš” ê¸°ëŠ¥**:
```python
class DomainAgent(BaseWorkerAgent):
    # 3-Stage RAG Pipeline
    async def _search_my_domain(self, query) -> List[Dict]
        """Stage 1 (Vector) â†’ Stage 2 (Graph) â†’ Stage 3 (Rerank)"""

    # Stage 1
    async def _vector_search(self, query_embedding, limit=5)
        """Neo4j ë²¡í„° ê²€ìƒ‰: cosine similarity >= 0.5"""

    # Stage 2
    async def _graph_expansion(self, start_hang_id, query_embedding)
        """RNE ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì´ì›ƒ í™•ì¥ + cross_law"""

    # Stage 3
    def _rerank_results(self, results, query_embedding)
        """ì¤‘ë³µ ì œê±° + ìœ ì‚¬ë„ ìˆœ ì •ë ¬"""

    # A2A í˜‘ì—…
    async def _consult_neighbors(self, query) -> List[Dict]
        """í’ˆì§ˆ ì ìˆ˜ < 0.6ì¼ ë•Œ ì´ì›ƒ ë„ë©”ì¸ ì—ì´ì „íŠ¸ì—ê²Œ í˜‘ì—… ìš”ì²­"""

    # ê²°ê³¼ í†µí•©
    def _merge_results(self, my_results, neighbor_results)
        """ìê¸° ë„ë©”ì¸ ê²°ê³¼ ìš°ì„ , ì´ì›ƒ ê²°ê³¼ ì¶”ê°€"""
```

**system_prompt êµ¬ì¡°**:
```python
system_prompt = f"""ë‹¹ì‹ ì€ í•œêµ­ ë²•ë¥  ì „ë¬¸ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.
ì „ë¬¸ ë¶„ì•¼: {self.domain_name}
ê´€ë¦¬ ì¡°í•­: {len(self.node_ids)}ê°œ

ê²€ìƒ‰ ë°©ì‹:
- Stage 1: Vector Search (ì˜ë¯¸ë¡ ì  ìœ ì‚¬ë„)
- Stage 2: Graph Expansion (RNE/INEë¡œ ì—°ê´€ ì¡°í•­ íƒìƒ‰)
- Stage 3: Cross-law í™•ì¥ (ì‹œí–‰ë ¹/ì‹œí–‰ê·œì¹™ í¬í•¨)

ì‘ë‹µ í˜•ì‹:
1. í•µì‹¬ ì¡°í•­ (Top 3)
2. ì—°ê´€ ì¡°í•­ (4~6ìœ„)
3. í†µê³„ ì •ë³´ (ìì²´/í˜‘ì—… ê°œìˆ˜)
"""
```

### 3. `test_agent_manager.py` (375 lines)
**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:
1. âœ… AgentManager ì´ˆê¸°í™”
2. âœ… ê¸°ì¡´ HANG ë°ì´í„° ë¡œë“œ (Neo4j)
3. âœ… PDF ìë™ ì²˜ë¦¬ (law/data/raw/*.pdf)
4. âœ… ì—ì´ì „íŠ¸ ë¶„í•  í…ŒìŠ¤íŠ¸ (í¬ê¸° > 300)
5. âœ… ì—ì´ì „íŠ¸ ë³‘í•© í…ŒìŠ¤íŠ¸ (í¬ê¸° < 50)
6. âœ… A2A ë„¤íŠ¸ì›Œí¬ ìµœì í™”
7. âœ… í†µê³„ ì •ë³´ ì¡°íšŒ

**ì‹¤í–‰ ë°©ë²•**:
```bash
.\.venv\Scripts\activate
python test_agent_manager.py
```

**ì˜ˆìƒ ì¶œë ¥**:
```
================================================================================
  í…ŒìŠ¤íŠ¸ 1: AgentManager ì´ˆê¸°í™”
================================================================================

âœ… AgentManager ì´ˆê¸°í™” ì„±ê³µ
   - Neo4j ì—°ê²°: True
   - LLM í´ë¼ì´ì–¸íŠ¸: True
   - ë„ë©”ì¸ ê°œìˆ˜: 0

================================================================================
  í…ŒìŠ¤íŠ¸ 2: ê¸°ì¡´ HANG ë°ì´í„° ë¡œë“œ
================================================================================

âœ… ê¸°ì¡´ HANG ë…¸ë“œ 100ê°œ ë°œê²¬
   - ìºì‹œëœ ì„ë² ë”©: 100

ìë™ ë„ë©”ì¸ í• ë‹¹ ì¤‘...
âœ… 100ê°œ ë…¸ë“œë¥¼ 3ê°œ ë„ë©”ì¸ì— í• ë‹¹

ìƒì„±ëœ ë„ë©”ì¸:
   - ë„ì‹œê³„íš: 45ê°œ ë…¸ë“œ, 1ê°œ ì´ì›ƒ
   - ê±´ì¶•ê·œì œ: 35ê°œ ë…¸ë“œ, 2ê°œ ì´ì›ƒ
   - í† ì§€ì´ìš©: 20ê°œ ë…¸ë“œ, 1ê°œ ì´ì›ƒ
```

### 4. `docs/2025-10-31-RESEARCH_ALIGNMENT.md` (650 lines)
**ë‚´ìš©**:
- ğŸ“š í•µì‹¬ ì—°êµ¬ ë…¼ë¬¸ (2024-2025) 10í¸
- ğŸ¯ ìš°ë¦¬ ì‹œìŠ¤í…œì˜ í˜ì‹  í¬ì¸íŠ¸
- ğŸ“Š ì„±ëŠ¥ ë¹„êµ (ë²¡í„° vs RNE vs INE)
- ğŸ”¬ í•™ìˆ  ì—°êµ¬ì™€ì˜ ì •ë ¬ ê²€ì¦
- ğŸ“ ë…¼ë¬¸ ë°œí‘œ ê°€ëŠ¥ì„±

**ì£¼ìš” ë°œê²¬**:
1. âœ… LLM-powered MAS (Frontiers 2025) - ì™„ì „íˆ ì¼ì¹˜
2. âœ… Hierarchical MAS Taxonomy (ArXiv 2025) - Manager-Worker íŒ¨í„´
3. âœ… CaseGNN (ArXiv 2023) - ê·¸ë˜í”„ êµ¬ì¡° ìœ ì‚¬
4. âœ… Korean Law Graph (CAMGraph 2024) - ìš°ë¦¬ê°€ ë” ë°œì „ë¨
5. âœ… Graph RAG (ArXiv 2025) - 3-Stage Pipeline ë™ì¼

**ë…ì°½ì  ê¸°ì—¬**:
- ğŸŒŸ Agent Lifecycle ìë™í™” (ë…¼ë¬¸ ë¯¸í•´ê²° ë¬¸ì œ)
- ğŸŒŸ í•œêµ­ ë²•ë¥  5-level ê³„ì¸µ + IMPLEMENTS
- ğŸŒŸ RNE/INE ê³µê°„ ì•Œê³ ë¦¬ì¦˜ì˜ ë²•ë¥  ê·¸ë˜í”„ ì ìš©
- ğŸŒŸ LLM ìë™ ë„ë©”ì¸ ì´ë¦„ ìƒì„±

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AgentManager                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  process_new_pdf()                                    â”‚   â”‚
â”‚  â”‚    â†“                                                  â”‚   â”‚
â”‚  â”‚  1. PDF â†’ Law Parser â†’ Neo4j (HANG nodes)           â”‚   â”‚
â”‚  â”‚    â†“                                                  â”‚   â”‚
â”‚  â”‚  2. Generate Embeddings (SentenceTransformer)        â”‚   â”‚
â”‚  â”‚    â†“                                                  â”‚   â”‚
â”‚  â”‚  3. _assign_to_agents() â† í•µì‹¬!                      â”‚   â”‚
â”‚  â”‚    â”‚                                                  â”‚   â”‚
â”‚  â”‚    â”œâ”€ similarity >= 0.85? â†’ ê¸°ì¡´ ë„ë©”ì¸ì— ì¶”ê°€       â”‚   â”‚
â”‚  â”‚    â”‚                                                  â”‚   â”‚
â”‚  â”‚    â””â”€ similarity < 0.85?  â†’ ìƒˆ ë„ë©”ì¸ ìƒì„±           â”‚   â”‚
â”‚  â”‚                              (LLM ì´ë¦„ ìƒì„±)          â”‚   â”‚
â”‚  â”‚    â†“                                                  â”‚   â”‚
â”‚  â”‚  4. _optimize_network()                              â”‚   â”‚
â”‚  â”‚    â”œâ”€ ë¶„í•  (size > 300) â†’ K-means                   â”‚   â”‚
â”‚  â”‚    â”œâ”€ ë³‘í•© (size < 50)  â†’ ìœ ì‚¬ë„ ê¸°ë°˜               â”‚   â”‚
â”‚  â”‚    â””â”€ A2A ì´ì›ƒ ì¬êµ¬ì„± (cross_law >= 10)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DomainAgent #1                           â”‚
â”‚  domain_name: "ë„ì‹œê³„íš"                                     â”‚
â”‚  node_ids: [hang_001, hang_002, ..., hang_045]              â”‚
â”‚  neighbor_agents: ["law_ê±´ì¶•ê·œì œ", "law_í† ì§€ì´ìš©"]           â”‚
â”‚                                                              â”‚
â”‚  _search_my_domain()                                         â”‚
â”‚    â†“                                                         â”‚
â”‚  [Stage 1] Vector Search                                    â”‚
â”‚    â†“                                                         â”‚
â”‚  [Stage 2] Graph Expansion (RNE)                            â”‚
â”‚    â†“                                                         â”‚
â”‚  [Stage 3] Reranking                                        â”‚
â”‚    â†“                                                         â”‚
â”‚  quality_score < 0.6?                                       â”‚
â”‚    â†“ Yes                                                    â”‚
â”‚  _consult_neighbors() â† A2A                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ A2A Protocol
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DomainAgent #2                           â”‚
â”‚  domain_name: "ê±´ì¶•ê·œì œ"                                     â”‚
â”‚  node_ids: [hang_101, hang_102, ..., hang_135]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ìê°€ ì¡°ì§í™” í”„ë¡œì„¸ìŠ¤

### ì‹œë‚˜ë¦¬ì˜¤: 100ê°œ PDF ì²˜ë¦¬

```
ì´ˆê¸° ìƒíƒœ: ë„ë©”ì¸ 0ê°œ

PDF #1 ì²˜ë¦¬ (êµ­í† ê³„íšë²•)
  â†’ 25 HANG ë…¸ë“œ
  â†’ ë„ë©”ì¸ ìƒì„±: "ë„ì‹œê³„íš" (25ê°œ)

PDF #2 ì²˜ë¦¬ (êµ­í† ê³„íšë²• ì‹œí–‰ë ¹)
  â†’ 18 HANG ë…¸ë“œ
  â†’ ìœ ì‚¬ë„ 0.89 â†’ "ë„ì‹œê³„íš" ë„ë©”ì¸ì— ì¶”ê°€ (43ê°œ)

PDF #3 ì²˜ë¦¬ (ê±´ì¶•ë²•)
  â†’ 30 HANG ë…¸ë“œ
  â†’ ìœ ì‚¬ë„ 0.61 â†’ ìƒˆ ë„ë©”ì¸ ìƒì„±: "ê±´ì¶•ê·œì œ" (30ê°œ)

PDF #4 ì²˜ë¦¬ (í† ì§€ì´ìš©ê·œì œë²•)
  â†’ 22 HANG ë…¸ë“œ
  â†’ ìœ ì‚¬ë„ 0.72 â†’ ìƒˆ ë„ë©”ì¸ ìƒì„±: "í† ì§€ì´ìš©" (22ê°œ)

... (PDF #5 ~ #50 ì²˜ë¦¬)

PDF #51 ì²˜ë¦¬
  â†’ "ë„ì‹œê³„íš" ë„ë©”ì¸ í¬ê¸° = 305ê°œ
  â†’ ìë™ ë¶„í•  íŠ¸ë¦¬ê±°!
  â†’ K-means (k=2)
  â†’ "ë„ì‹œê³„íš_ì¼ë°˜" (152ê°œ) + "ë„ì‹œê³„íš_ìš©ë„ì§€ì—­" (153ê°œ)

... (PDF #51 ~ #100 ì²˜ë¦¬)

ìµœì¢… ìƒíƒœ:
  - ì´ ë„ë©”ì¸: 23ê°œ
  - í‰ê·  í¬ê¸°: 87ê°œ ë…¸ë“œ
  - ìµœì†Œ í¬ê¸°: 51ê°œ (ë³‘í•© ì™„ë£Œ)
  - ìµœëŒ€ í¬ê¸°: 298ê°œ (ë¶„í•  ì§ì „)
  - A2A ì´ì›ƒ ê´€ê³„: 47ê°œ
```

---

## ğŸ“Š ì„±ëŠ¥ ì˜ˆì¸¡

### ëŒ€ê·œëª¨ ì²˜ë¦¬ ì‹œë‚˜ë¦¬ì˜¤

| PDF ê°œìˆ˜ | ì˜ˆìƒ HANG | ì˜ˆìƒ ë„ë©”ì¸ | ì²˜ë¦¬ ì‹œê°„ | ë©”ëª¨ë¦¬ |
|---------|-----------|------------|---------|--------|
| 10      | ~500      | 3-5        | 2ë¶„     | 500MB  |
| 100     | ~5,000    | 20-30      | 20ë¶„    | 2GB    |
| 1,000   | ~50,000   | 100-150    | 3ì‹œê°„   | 10GB   |
| 10,000  | ~500,000  | 500-800    | 30ì‹œê°„  | 50GB   |

**ë³‘ëª© êµ¬ê°„**:
1. ì„ë² ë”© ìƒì„± (SentenceTransformer) - GPU ê°€ì† ê°€ëŠ¥
2. Neo4j ì¿¼ë¦¬ (cross_law ê´€ê³„) - ì¸ë±ìŠ¤ ìµœì í™” í•„ìš”
3. K-means í´ëŸ¬ìŠ¤í„°ë§ (ë¶„í•  ì‹œ) - ë³‘ë ¬í™” ê°€ëŠ¥

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] AgentManager ì´ˆê¸°í™”
- [ ] Neo4j ì—°ê²° í™•ì¸
- [ ] OpenAI API ì—°ê²° í™•ì¸
- [ ] ê¸°ì¡´ HANG ë°ì´í„° ë¡œë“œ
- [ ] ì„ë² ë”© ìºì‹œ ìƒì„±

### Phase 2: ë„ë©”ì¸ í• ë‹¹ í…ŒìŠ¤íŠ¸
- [ ] ì²« ë²ˆì§¸ ë„ë©”ì¸ ìë™ ìƒì„± (ìœ ì‚¬ë„ < 0.85)
- [ ] ê¸°ì¡´ ë„ë©”ì¸ì— ë…¸ë“œ ì¶”ê°€ (ìœ ì‚¬ë„ >= 0.85)
- [ ] LLM ë„ë©”ì¸ ì´ë¦„ ìƒì„± ê²€ì¦
- [ ] ì„¼íŠ¸ë¡œì´ë“œ ì—…ë°ì´íŠ¸ í™•ì¸

### Phase 3: ìµœì í™” í…ŒìŠ¤íŠ¸
- [ ] ì—ì´ì „íŠ¸ ë¶„í•  (í¬ê¸° > 300)
- [ ] ì—ì´ì „íŠ¸ ë³‘í•© (í¬ê¸° < 50)
- [ ] A2A ì´ì›ƒ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
- [ ] ìµœì í™” ì „í›„ í†µê³„ ë¹„êµ

### Phase 4: PDF ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ (ì„ íƒì )
- [ ] êµ­í† ê³„íšë²• PDF ì²˜ë¦¬
- [ ] ì‹œí–‰ë ¹ PDF ì²˜ë¦¬ (ê°™ì€ ë„ë©”ì¸ í™•ì¸)
- [ ] ë‹¤ë¥¸ ë²•ë¥  PDF ì²˜ë¦¬ (ìƒˆ ë„ë©”ì¸ í™•ì¸)
- [ ] ëŒ€ëŸ‰ ì²˜ë¦¬ (10+ PDFs)

### Phase 5: DomainAgent í…ŒìŠ¤íŠ¸
- [ ] DomainAgent ìƒì„±
- [ ] Vector Search ì‹¤í–‰
- [ ] Graph Expansion ì‹¤í–‰
- [ ] A2A í˜‘ì—… í…ŒìŠ¤íŠ¸
- [ ] ì‘ë‹µ í¬ë§· ê²€ì¦

---

## ğŸš€ ì‹¤í–‰ ê°€ì´ë“œ

### 1. í™˜ê²½ ì¤€ë¹„
```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™”
.\.venv\Scripts\activate

# í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install openai scikit-learn sentence-transformers

# Neo4j ì‹œì‘ (Neo4j Desktop)
# http://localhost:7474 ì ‘ì† í™•ì¸
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)
```bash
# OpenAI (ë„ë©”ì¸ ì´ë¦„ ìƒì„±ìš©)
OPENAI_API_KEY=sk-...

# Neo4j
NEO4J_URI=neo4j://127.0.0.1:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=11111111
```

### 3. ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
python test_agent_manager.py
```

### 4. PDF ì²˜ë¦¬ (ì„ íƒì )
```bash
# Python ì¸í„°í”„ë¦¬í„°ì—ì„œ
from agents.agent_manager import AgentManager

manager = AgentManager()
result = manager.process_new_pdf("law/data/raw/04_êµ­í† ì˜ ê³„íš ë° ì´ìš©ì— ê´€í•œ ë²•ë¥ (ë²•ë¥ ).pdf")

print(f"ì²˜ë¦¬ ì™„ë£Œ: {result['hang_count']}ê°œ HANG, {result['domains_touched']}ê°œ ë„ë©”ì¸")
```

---

## ğŸ“ˆ í–¥í›„ ê°œì„  ì‚¬í•­

### 1. ì‹œê°„ ì¶”ì  (Graph RAG ë…¼ë¬¸ ì°¸ê³ )
```python
class LegalVersion:
    """ë²•ë¥  ì¡°í•­ì˜ ì‹œê°„ë³„ ë²„ì „ ê´€ë¦¬"""
    def __init__(self, hang_id, valid_from, valid_to, action):
        self.hang_id = hang_id
        self.valid_from = valid_from  # 2023-01-01
        self.valid_to = valid_to      # 2024-12-31
        self.action = action          # "amended", "repealed"
```

### 2. LLM ì¼€ì´ìŠ¤ ìƒì„± (CAMGraph ë…¼ë¬¸ ì°¸ê³ )
```python
def _generate_case_example(self, hang_id):
    """ê° HANG ì¡°í•­ì— ëŒ€í•œ ì‹¤ì œ ì¼€ì´ìŠ¤ ì˜ˆì‹œ ìƒì„±"""
    prompt = f"""ë‹¤ìŒ ë²•ë¥  ì¡°í•­ì— ëŒ€í•œ ì‹¤ì œ ì ìš© ì‚¬ë¡€ë¥¼ ìƒì„±í•˜ì„¸ìš”:
    {hang_content}

    ì‚¬ë¡€:"""
    return llm.complete(prompt)
```

### 3. Contrastive Learning (CaseGNN ë…¼ë¬¸ ì°¸ê³ )
```python
def _update_centroid_with_contrastive(self, domain):
    """ëŒ€ì¡° í•™ìŠµìœ¼ë¡œ ì„¼íŠ¸ë¡œì´ë“œ ê°œì„ """
    positive_samples = domain.embeddings
    negative_samples = self._sample_from_other_domains()
    # Contrastive loss ê³„ì‚° ë° ì„¼íŠ¸ë¡œì´ë“œ ì—…ë°ì´íŠ¸
```

### 4. ì„±ëŠ¥ ìµœì í™”
- [ ] GPU ê°€ì† (ì„ë² ë”© ìƒì„±)
- [ ] Neo4j ì¸ë±ìŠ¤ ìµœì í™” (cross_law ì¿¼ë¦¬)
- [ ] ë³‘ë ¬ ì²˜ë¦¬ (PDF íŒŒì‹±)
- [ ] ìºì‹± ì „ëµ (ì„ë² ë”©, ì¿¼ë¦¬ ê²°ê³¼)

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

1. **`SELF_ORGANIZING_MAS.md`** - ìµœì´ˆ ì„¤ê³„ ë¬¸ì„œ
2. **`NODE_LEVEL_AGENT_ARCHITECTURE.md`** - ë„ë©”ì¸ ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜
3. **`RESEARCH_ALIGNMENT.md`** - í•™ìˆ  ì—°êµ¬ ê²€ì¦ (ë³¸ ë¬¸ì„œ)
4. **`RNE_INE_INTEGRATION_GUIDE.md`** - RNE/INE ì•Œê³ ë¦¬ì¦˜ ì„¤ëª…
5. **`CROSS_LAW_VERIFICATION_COMPLETE.md`** - 6ë‹¨ê³„ ê²€ì¦ ê²°ê³¼

---

## âœ… ê²°ë¡ 

### êµ¬í˜„ ì™„ë£Œ í•­ëª©
1. âœ… AgentManager í´ë˜ìŠ¤ (518 lines)
2. âœ… DomainAgent ì›Œì»¤ (446 lines)
3. âœ… í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ (375 lines)
4. âœ… ì—°êµ¬ ê²€ì¦ ë¬¸ì„œ (650 lines)

### í•µì‹¬ ê¸°ëŠ¥
1. âœ… ìë™ ë„ë©”ì¸ ë°œê²¬ (ìœ ì‚¬ë„ < 0.85)
2. âœ… LLM ë„ë©”ì¸ ì´ë¦„ ìƒì„± (GPT-4o-mini)
3. âœ… ìë™ ë¶„í• /ë³‘í•© (í¬ê¸° ê¸°ë°˜)
4. âœ… A2A ë„¤íŠ¸ì›Œí¬ êµ¬ì„± (cross_law ê¸°ë°˜)
5. âœ… 3-Stage RAG Pipeline (Vector â†’ Graph â†’ Rerank)

### í•™ìˆ ì  ê¸°ì—¬
1. âœ… Agent Lifecycle ìë™í™” (ë…¼ë¬¸ ë¯¸í•´ê²° ë¬¸ì œ)
2. âœ… í•œêµ­ ë²•ë¥  ê³„ì¸µ êµ¬ì¡° ì™„ì „ ì§€ì›
3. âœ… RNE/INEì˜ ë²•ë¥  ê·¸ë˜í”„ ì ìš©
4. âœ… 2024-2025 ìµœì‹  ì—°êµ¬ì™€ ì¼ì¹˜

### ë‹¤ìŒ ë‹¨ê³„
1. ğŸ”„ `test_agent_manager.py` ì‹¤í–‰ìœ¼ë¡œ ì‹¤ì œ ë™ì‘ ê²€ì¦
2. ğŸ”„ ëŒ€ê·œëª¨ PDF (100+) ì²˜ë¦¬ ë²¤ì¹˜ë§ˆí¬
3. ğŸ”„ ì„±ëŠ¥ ìµœì í™” (GPU, ì¸ë±ìŠ¤, ë³‘ë ¬í™”)
4. ğŸ”„ ë…¼ë¬¸ ì‘ì„± (AAMAS 2026 / ICAIL 2025)

---

**êµ¬í˜„ ì™„ë£Œ ì‹œê°**: 2025-10-31
**ì´ ì½”ë“œ ë¼ì¸**: ~1,989 lines
**í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: 7ê°œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
**ì—°êµ¬ ê²€ì¦**: 10ê°œ ìµœì‹  ë…¼ë¬¸ê³¼ ì¼ì¹˜
